<!DOCTYPE html>
<html>
<head>
    <title>LinkZen Bookmarklet</title>
    <script>
        // Funzione che salva i dati in localStorage prima di aprire LinkZen
        function saveAndRedirect() {
            const data = {
                title: encodeURIComponent(document.title || ''),
                url: encodeURIComponent(window.location.href),
                timestamp: Date.now()
            };
            
            // Salva i dati in localStorage
            localStorage.setItem('linkzen_bookmarklet_data', JSON.stringify(data));
            
            // Prova ad aprire/reindirizzare LinkZen
            try {
                // Prima prova con window.open
                const linkzenWin = window.open('https://lumo250.github.io/LinkZen/', '_blank');
                
                // Fallback per iOS se window.open fallisce
                setTimeout(() => {
                    if (!linkzenWin || linkzenWin.closed) {
                        window.location.href = 'https://lumo250.github.io/LinkZen/';
                    }
                }, 100);
            } catch(e) {
                window.location.href = 'https://lumo250.github.io/LinkZen/';
            }
        }
        
        // Esegui automaticamente quando la pagina viene caricata
        saveAndRedirect();
    </script>
</head>
<body>
    <p>Reindirizzamento a LinkZen in corso...</p>
</body>
</html>
