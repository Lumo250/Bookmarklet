<!DOCTYPE html>
<html>
<head>
    <title>LinkZen Bookmarklet</title>
    <script>
        // Funzione principale che verr√† eseguita quando richiamata
        function addToLinkZen() {
            try {
                const title = encodeURIComponent(window.document.title || '');
                const url = encodeURIComponent(window.location.href);
                const linkzenUrl = `https://lumo250.github.io/LinkZen/?bookmarklet=1&title=${title}&url=${url}`;
                
                // Prova a riutilizzare la stessa finestra
                const linkzenWindow = window.open('', 'linkzenWindow');
                if (linkzenWindow && !linkzenWindow.closed) {
                    linkzenWindow.location.href = linkzenUrl;
                    linkzenWindow.focus();
                } else {
                    window.open(linkzenUrl, 'linkzenWindow');
                }
            } catch(e) {
                console.error("Bookmarklet error:", e);
            }
        }
        
        // Esegui automaticamente se aperto direttamente
        if(window === window.top) {
            addToLinkZen();
            window.close(); // Chiudi questa pagina dopo l'esecuzione
        }
    </script>
</head>
<body>
    <h1>LinkZen Bookmarklet</h1>
    <p>Questa pagina aggiunge automaticamente la pagina corrente a LinkZen.</p>
</body>
</html>
